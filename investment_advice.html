<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ðŸ’¹ AI Investment Advisor</title>
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <!-- Font Awesome -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #eef5ff;
    }
    .card {
      border: none;
      border-radius: 0.75rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .form-control,
    .form-select {
      min-height: 3rem;
    }
    textarea.form-control {
      min-height: 5rem;
    }
    .form-range {
      margin: 0.5rem 0;
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <!-- Header Card -->
    <div class="card bg-white text-center p-4 mb-5">
      <h1 class="fw-bold">
        <i class="fa-solid fa-chart-line"></i> AI Investment Advisor
      </h1>
      <p class="text-muted">Personalized investment strategies, just for you.</p>
    </div>

    <!-- Form -->
    <form id="investmentForm" class="row g-4">
      <!-- Age -->
      <div class="col-md-6">
        <div class="form-floating">
          <input
            type="number"
            class="form-control"
            id="age"
            name="age"
            placeholder="Age"
            min="18"
            required
          />
          <label for="age">
            <i class="fa-solid fa-birthday-cake"></i> Age
          </label>
        </div>
      </div>

      <!-- Occupation -->
      <div class="col-md-6">
        <div class="form-floating">
          <input
            type="text"
            class="form-control"
            id="occupation"
            name="occupation"
            placeholder="Occupation"
            required
          />
          <label for="occupation">
            <i class="fa-solid fa-briefcase"></i> Occupation
          </label>
        </div>
      </div>

      <!-- Monthly Income -->
      <div class="col-md-6">
        <div class="form-floating">
          <input
            type="number"
            class="form-control"
            id="monthly_income"
            name="monthly_income"
            placeholder="Monthly Income"
            min="0"
            required
          />
          <label for="monthly_income">
            <i class="fa-solid fa-indian-rupee-sign"></i> Monthly Income (â‚¹)
          </label>
        </div>
      </div>

      <!-- Monthly Expenses -->
      <div class="col-md-6">
        <div class="form-floating">
          <input
            type="number"
            class="form-control"
            id="monthly_expenses"
            name="monthly_expenses"
            placeholder="Monthly Expenses"
            min="0"
            required
          />
          <label for="monthly_expenses">
            <i class="fa-solid fa-indian-rupee-sign"></i> Monthly Expenses (â‚¹)
          </label>
        </div>
      </div>

      <!-- Current Savings -->
      <div class="col-md-6">
        <div class="form-floating">
          <input
            type="number"
            class="form-control"
            id="current_saving"
            name="current_saving"
            placeholder="Current Savings"
            min="0"
            required
          />
          <label for="current_saving">
            <i class="fa-solid fa-piggy-bank"></i> Current Savings (â‚¹)
          </label>
        </div>
      </div>

      <!-- Investment Goals -->
      <div class="col-12">
        <div class="form-floating">
          <textarea
            class="form-control"
            id="investment_goals"
            name="investment_goals"
            placeholder="Investment Goals"
            required
          ></textarea>
          <label for="investment_goals">
            <i class="fa-solid fa-bullseye"></i> Investment Goals
          </label>
        </div>
      </div>

      <!-- Risk Tolerance -->
      <div class="col-md-6">
        <label for="riskTolerance" class="form-label fw-semibold">
          <i class="fa-solid fa-gauge-high"></i> Risk Tolerance
          <span id="riskVal" class="fw-bold">5</span>/10
        </label>
        <input
          type="range"
          class="form-range"
          id="riskTolerance"
          name="risk_tolerance"
          min="1"
          max="10"
          value="5"
        />
      </div>

      <!-- Time Horizon -->
      <div class="col-md-6">
        <label for="timeHorizon" class="form-label fw-semibold">
          <i class="fa-solid fa-hourglass-half"></i> Time Horizon
          <span id="horizonVal" class="fw-bold">5</span> yrs
        </label>
        <input
          type="range"
          class="form-range"
          id="timeHorizon"
          name="time_horizon"
          min="1"
          max="30"
          value="5"
        />
      </div>

      <!-- Preferred Investment -->
      <div class="col-md-6">
        <div class="form-floating">
          <select
            class="form-select"
            id="investment_type"
            name="investment_type"
            required
          >
            <option value="" disabled selected>Select an option</option>
            <option>Mutual Funds</option>
            <option>Stocks</option>
            <option>FDs</option>
            <option>Bonds</option>
            <option>Real Estate</option>
          </select>
          <label for="investment_type">
            <i class="fa-solid fa-box-open"></i> Preferred Investment
          </label>
        </div>
      </div>

      <!-- Amount to Invest -->
      <div class="col-md-6">
        <div class="form-floating">
          <input
            type="number"
            class="form-control"
            id="investment_amount"
            name="investment_amount"
            placeholder="Investment Amount"
            min="0"
            required
          />
          <label for="investment_amount">
            <i class="fa-solid fa-coins"></i> Amount to Invest (â‚¹)
          </label>
        </div>
      </div>

      <!-- Other Investments -->
      <div class="col-md-6">
        <div class="form-floating">
          <input
            type="text"
            class="form-control"
            id="other_investments"
            name="other_investments"
            placeholder="Other Investments"
          />
          <label for="other_investments">
            <i class="fa-solid fa-layer-group"></i> Other Investments
          </label>
        </div>
      </div>

      <!-- Expected Returns -->
      <div class="col-md-6">
        <label for="expectedReturns" class="form-label fw-semibold">
          <i class="fa-solid fa-percent"></i> Expected Returns
          <span id="returnVal" class="fw-bold">8</span>%
        </label>
        <input
          type="range"
          class="form-range"
          id="expectedReturns"
          name="expected_returns"
          min="0"
          max="30"
          value="8"
        />
      </div>

      <!-- Submit -->
      <div class="col-12 text-center">
        <button class="btn btn-primary btn-lg" type="submit">
          <i class="fa-solid fa-paper-plane"></i> Get Advice
        </button>
      </div>
    </form>

    <!-- Advice Output -->
    <div
      id="adviceOutput"
      class="card bg-white p-4 mt-5"
      style="display: none;"
    >
      <h2 class="fw-semibold"><i class="fa-solid fa-file-alt"></i> Your Advice</h2>
      <div
        id="adviceText"
        class="mt-3 text-start"
        style="white-space: pre-wrap;"
      ></div>
    </div>
  </div>

  <!-- Bootstrap JS (Optional if you need dropdowns, etc.) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Form & Slider Script -->
  <script>
    // Update slider labels
    [
      ["riskTolerance", "riskVal"],
      ["timeHorizon", "horizonVal"],
      ["expectedReturns", "returnVal"]
    ].forEach(([sliderId, labelId]) => {
      const slider = document.getElementById(sliderId),
            label = document.getElementById(labelId);
      slider.addEventListener("input", e => {
        label.textContent = e.target.value;
      });
    });

    // Submit handler
    document
      .getElementById("investmentForm")
      .addEventListener("submit", async e => {
        e.preventDefault();
        const form = new FormData(e.target);
        const res = await fetch("/investment/advice", {
          method: "POST",
          body: form
        });
        const { advice } = await res.json();
        document.getElementById("adviceText").innerHTML = advice;
        document.getElementById("adviceOutput").style.display = "block";
        window.scrollTo({
          top: document.body.scrollHeight,
          behavior: "smooth"
        });
      });
  </script>
</body>
</html>
